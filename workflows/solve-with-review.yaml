workflow:
  name: solve-with-review
  description: "5-step workflow with code review and refinement (Phase 2)"

  steps:
    - id: clarify
      model: haiku
      wrapper: claude_code
      prompt_strategy: prompts/clarify_problem.md
      outputs:
        - context/clarified_problem.md
      timeout: 180
      max_turns: 10

    - id: write_tests
      model: sonnet
      wrapper: claude_code
      prompt_strategy: prompts/write_tests.md
      outputs:
        - project/solution.py
      depends_on:
        - clarify
      timeout: 240
      max_turns: 10

    - id: build_solution
      model: sonnet
      wrapper: claude_code
      prompt_strategy: prompts/build_tdd.md
      outputs:
        - project/solution.py
      depends_on:
        - write_tests
      timeout: 300
      max_turns: 15

    - id: review
      model: sonnet
      wrapper: claude_code
      prompt_strategy: prompts/review_code.md
      outputs:
        - context/review_notes.md
      depends_on:
        - build_solution
      timeout: 240
      max_turns: 10

    - id: refine
      model: sonnet
      wrapper: claude_code
      prompt_strategy: prompts/refine_solution.md
      outputs:
        - project/solution.py
      depends_on:
        - review
      timeout: 300
      max_turns: 15
